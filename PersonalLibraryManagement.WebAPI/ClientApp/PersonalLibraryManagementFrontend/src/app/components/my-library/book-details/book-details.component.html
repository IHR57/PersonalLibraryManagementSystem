<!-- book-details.component.html -->
<div class="max-w-4xl mx-auto p-4 sm:p-6 lg:p-8">
  <div *ngIf="loading$.value" class="flex justify-center items-center h-64">
    <mat-spinner [diameter]="50"></mat-spinner>
  </div>
  <div
    *ngIf="!loading$.value"
    class="bg-white shadow-lg rounded-lg overflow-hidden flex flex-col p-3">
    <div class="flex flex-row-reverse">
      <button mat-flat-button class="pt-3" (click)="openUpdateBookDialog()">
        <mat-icon>edit</mat-icon> Edit
      </button>
    </div>
    <div class="flex">
      <div class="w-1/3">
        <img
          class="object-cover h-80 w-80"
          src="/assets/img/single_book.jpg"
          alt="{{ book.name }}" />
      </div>
      <div class="w-2/3 p-4">
        <h1 class="text-2xl font-bold text-gray-900">{{ book.name }}</h1>
        <h2 class="text-xl text-gray-700">
          by
          <a
            class="text-blue-400 hover:text-blue-700"
            [routerLink]="'/my-library'"
            >{{ book.writer }}</a
          >
        </h2>
        <a
          class="text-blue-400 hover:text-blue-700"
          [routerLink]="'/my-library'"
          ><p class="mt-4">
            <b>{{ book.category }}</b>
          </p></a
        >
        <div class="flex">
          <div class="w-1/3"><p class="mt-2 text-gray-500">Bought on</p></div>
          <div class="w-1/3">
            <p class="mt-2 text-gray-500">: {{ book.boughtDate | date }}</p>
          </div>
        </div>
        <div class="flex">
          <div class="w-1/3">
            <p class="mt-2 text-gray-500">Buying Price</p>
          </div>
          <div class="w-1/3">
            <p class="mt-2 text-gray-500">: {{ book.buyingPrice }} TK</p>
          </div>
        </div>
        <div class="flex">
          <div class="w-1/3"><p class="mt-2 text-gray-500">Status</p></div>
          <div class="w-1/3">
            <p class="mt-2 text-gray-500">: {{ readStatusMap[book.status] }}</p>
          </div>
        </div>
        <div class="flex" *ngIf="book.finishedDate">
          <div class="w-1/3"><p class="mt-2 text-gray-500">Finished on</p></div>
          <div class="w-1/3">
            <p class="mt-2 text-gray-500">: {{ book.finishedDate | date }}</p>
          </div>
        </div>
        <div class="mt-2 flex items-center text-gray-500">
          <div class="w-1/3"><p>Personal Rating:</p></div>
          <div class="w-2/3">
            <ng-container *ngFor="let rating of starRange">
              <mat-icon class="text-yellow-600">{{
                book.personalRating / 2 >= rating ? 'star' : 'star_border'
              }}</mat-icon>
            </ng-container>
          </div>
        </div>
        <div class="flex">
          <div class="w-1/3"><p class="mt-2 text-gray-500">Favourite</p></div>
          <div class="w-1/3">
            <p class="mt-2 text-gray-500">
              : {{ book.isFavourite ? 'Yes' : 'No' }}
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="mt-3 mb-3" *ngIf="book.personalNotes">
      <hr />
    </div>
    <div class="flex flex-col mb-3 p-2" *ngIf="book.personalNotes">
      <p>Personal Notes</p>
      <p class="text-gray-500 pt-1">{{ book.personalNotes }}</p>
    </div>
  </div>
</div>
